<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<ScrollPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="au.edu.rmit.cosc1295.carehome.controller.ShiftsController"
            fitToWidth="true" fitToHeight="true"
            style="-fx-background-color: linear-gradient(to bottom, #E1F5FE 0%, #ffffff 100%);">
    
    <VBox spacing="15" style="-fx-padding: 15;">
        
        <!-- Header with Icon -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="📅" style="-fx-font-size: 32px;"/>
            <Label text="Shift Management (Manager Only)" 
                   style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #01579B;"/>
        </HBox>
        
        <!-- Assign Shift Section -->
        <VBox spacing="12" style="-fx-background-color: linear-gradient(to right, #9C27B0, #BA68C8); -fx-padding: 18; -fx-background-radius: 10; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 8, 0, 0, 2);">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="➕" style="-fx-font-size: 20px;"/>
                <Label text="Assign New Shift" 
                       style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: white;"/>
            </HBox>
            
            <HBox spacing="12" alignment="CENTER_LEFT">
                <Label text="👤" style="-fx-font-size: 16px;"/>
                <Label text="Staff:" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                <ComboBox fx:id="staffBox" promptText="Select staff" prefWidth="220"
                          style="-fx-font-size: 13px;"/>
                
                <Label text="📆" style="-fx-font-size: 16px;"/>
                <Label text="Day:" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                <ComboBox fx:id="dayBox" promptText="Day" prefWidth="110"
                          style="-fx-font-size: 13px;"/>
                
                <Label text="🕐" style="-fx-font-size: 16px;"/>
                <Label text="Start:" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                <TextField fx:id="startField" promptText="HH:MM" prefWidth="70"
                           style="-fx-font-size: 13px; -fx-padding: 8;"/>
                
                <Label text="🕑" style="-fx-font-size: 16px;"/>
                <Label text="End:" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                <TextField fx:id="endField" promptText="HH:MM" prefWidth="70"
                           style="-fx-font-size: 13px; -fx-padding: 8;"/>
                
                <Button text="✓ Assign" onAction="#onAssign" 
                        style="-fx-background-color: #6A1B9A; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 16; -fx-background-radius: 6;"/>
            </HBox>
            
            <HBox spacing="8" alignment="CENTER_LEFT" style="-fx-background-color: rgba(255,255,255,0.2); -fx-padding: 8; -fx-background-radius: 6;">
                <Label text="ℹ️" style="-fx-font-size: 14px;"/>
                <Label text="Rules: Max 8 hours per shift  •  12 hours per day  •  48 hours per week" 
                       style="-fx-font-style: italic; -fx-text-fill: white; -fx-font-size: 11px; -fx-font-weight: bold;"/>
            </HBox>
        </VBox>
        
        <Label fx:id="statusLabel" text="✓ Ready" style="-fx-font-weight: bold; -fx-font-size: 13px; -fx-text-fill: #2E7D32;"/>
        
        <Separator style="-fx-background-color: #BDBDBD;"/>
        
        <!-- View Shifts Section -->
        <VBox spacing="12" VBox.vgrow="ALWAYS">
            <VBox spacing="12" style="-fx-background-color: linear-gradient(to right, #42A5F5, #64B5F6); -fx-padding: 15; -fx-background-radius: 10; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 8, 0, 0, 2);">
                <HBox spacing="12" alignment="CENTER_LEFT">
                    <Label text="👁️" style="-fx-font-size: 18px;"/>
                    <Label text="View Shifts:" style="-fx-font-weight: bold; -fx-text-fill: white; -fx-font-size: 14px;"/>
                    <ComboBox fx:id="viewStaffBox" promptText="Select staff" prefWidth="250"
                              style="-fx-font-size: 13px;"/>
                    <Button text="🔄 Refresh" onAction="#onRefresh" 
                            style="-fx-background-color: #1565C0; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 16; -fx-background-radius: 6;"/>
                </HBox>
            </VBox>
            
            <!-- Shift Summary Cards -->
            <HBox spacing="15">
                <VBox spacing="8" style="-fx-background-color: linear-gradient(to bottom, #FFE082, #FFD54F); -fx-padding: 15; -fx-background-radius: 10; -fx-min-width: 150; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 6, 0, 0, 2);">
                    <Label text="📊" style="-fx-font-size: 24px;"/>
                    <Label text="Total Shifts" style="-fx-font-weight: bold; -fx-text-fill: #F57F17; -fx-font-size: 12px;"/>
                    <Label fx:id="totalShiftsLabel" text="0" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #E65100;"/>
                </VBox>
                
                <VBox spacing="8" style="-fx-background-color: linear-gradient(to bottom, #90CAF9, #64B5F6); -fx-padding: 15; -fx-background-radius: 10; -fx-min-width: 150; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 6, 0, 0, 2);">
                    <Label text="⏱️" style="-fx-font-size: 24px;"/>
                    <Label text="Weekly Hours" style="-fx-font-weight: bold; -fx-text-fill: white; -fx-font-size: 12px;"/>
                    <Label fx:id="weeklyHoursLabel" text="0 / 48" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                </VBox>
                
                <VBox spacing="8" style="-fx-background-color: linear-gradient(to bottom, #A5D6A7, #81C784); -fx-padding: 15; -fx-background-radius: 10; -fx-min-width: 150; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 6, 0, 0, 2);">
                    <Label text="✅" style="-fx-font-size: 24px;"/>
                    <Label text="Status" style="-fx-font-weight: bold; -fx-text-fill: #1B5E20; -fx-font-size: 12px;"/>
                    <Label fx:id="complianceLabel" text="Compliant" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2E7D32;"/>
                </VBox>
            </HBox>
            
            <!-- Shifts List -->
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 2);">
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="📝" style="-fx-font-size: 18px;"/>
                    <Label text="Assigned Shifts" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-text-fill: #01579B;"/>
                </HBox>
                <ListView fx:id="shiftsList" VBox.vgrow="ALWAYS" prefHeight="200"
                          style="-fx-background-radius: 6; -fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-border-radius: 6;"/>
            </VBox>
            
            <!-- Weekly Schedule Grid -->
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 2);">
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="📅" style="-fx-font-size: 18px;"/>
                    <Label text="Weekly Schedule" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-text-fill: #01579B;"/>
                </HBox>
                <GridPane fx:id="scheduleGrid" hgap="8" vgap="8" 
                          style="-fx-border-color: #E0E0E0; -fx-border-width: 1; -fx-padding: 10; -fx-background-color: #FAFAFA; -fx-background-radius: 6; -fx-border-radius: 6;"/>
            </VBox>
        </VBox>
    </VBox>
</ScrollPane>
